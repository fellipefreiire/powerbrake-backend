#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Verificando testes e exclusÃµes..."

# Executa os testes unitÃ¡rios
npm run test || exit 1

# Executa os testes e2e
npm run test:e2e || exit 1

# Verifica se hÃ¡ testes com .only (test.only ou describe.only)
if grep -r --include="*.ts" --exclude-dir="node_modules" -E "test\.only|describe\.only" src/; then
  echo "âŒ 'test.only' ou 'describe.only' encontrado. Remova antes de fazer push."
  exit 1
fi

echo "âœ… Pre-push finalizado com sucesso."
